<!DOCTYPE html>
<html>
  <head>
  </head>
  <body>
    <div id="container">
      <form action="">
        <input type="text" id="input">
        <input type="button" value="+" onclick="createToDo();">
      </form>
      <form>
        <input type="radio" name="emergency" value="emergency" checked>緊急<br>
        <input type="radio" name="emergency" value="non-emergency">不緊急<br>
      </form>
      <hr>
      <div id="todolist"></div>
    </div>

    <script>
      function createToDo() {
        // todos
        var todo = document.createElement("div");
        var span = document.createElement("span");
        var replaceButton = document.createElement("button");
        var removeButton = document.createElement("button");

        // span
        var jobName = document.getElementById("input").value;
        if( jobName == "" ) {
          jobName = "some shits";
        }
        span.innerHTML = jobName;

        var emergency = document.querySelectorAll("form > input[type=radio]");
        if (emergency[0].checked) {
          span.style.color = "red";
        }else if(emergency[1].checked) {
          span.style.color = "green";
        }else{
          alert("請選擇是否緊急!");
          return;
        }

        todo.appendChild(span);
        
        // replaceButton
        replaceButton.onclick = function() {
          var input = document.getElementById("input").value
          if (input == "" ){
            alert("No content!");
            return;
          }
          this.parentNode.firstChild.innerHTML = input;
          document.getElementById("input").value = "";
        }
        replaceButton.textContent = "R";
        todo.appendChild(replaceButton);

        // removeButton
        removeButton.onclick = function() {
          if (confirm("是否確定完成？")) {
            document.getElementById("input").value = "";

            // change color
            this.parentNode.firstChild.style.color = "aqua";

            // delete Buttons
            var replaceButton = this.parentNode.childNodes[1];
            this.parentNode.removeChild(replaceButton) ;
            this.parentNode.removeChild(this) ;
          }
        }
        removeButton.textContent = "V";
        todo.appendChild(removeButton);

        // add todo into todolist
        var todolist = document.getElementById("todolist");
        document.getElementById("input").value = "";
        todolist.appendChild(todo);
      }
    </script>   
  </body>
</html>